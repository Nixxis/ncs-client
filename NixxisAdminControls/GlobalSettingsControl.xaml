<UserControl x:Class="Nixxis.Client.Admin.GlobalSettingsControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:nixxis="clr-namespace:Nixxis.Client.Controls;assembly=NixxisWpfControls"
             xmlns:local="clr-namespace:Nixxis.Client.Admin"
             xmlns:sys="clr-namespace:System;assembly=mscorlib"
             xmlns:adminlink="clr-namespace:Nixxis.Client.Admin;assembly=AdminLink"
             xmlns:crs="clr-namespace:Nixxis;assembly=CRShared"
             xmlns:crsc="clr-namespace:ContactRoute;assembly=CRShared"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300"
             Name="MySelf">


    <UserControl.CommandBindings>
        <CommandBinding Command="local:AdminFrameSet.AdminObjectAddOperation" Executed="CommandBinding_Executed" CanExecute="CommandBinding_CanExecute"></CommandBinding>
        <CommandBinding Command="local:AdminFrameSet.AdminObjectDuplicateOperation" Executed="CommandBinding_Executed" CanExecute="CommandBinding_CanExecute"></CommandBinding>
        <CommandBinding Command="local:AdminFrameSet.AdminObjectDeleteOperation" Executed="CommandBinding_Executed" CanExecute="CommandBinding_CanExecute"></CommandBinding>
        <CommandBinding Command="local:AdminFrameSet.AdminObjectMoveUpOperation" Executed="CommandBinding_Executed" CanExecute="CommandBinding_CanExecute"></CommandBinding>
        <CommandBinding Command="local:AdminFrameSet.AdminObjectMoveDownOperation" Executed="CommandBinding_Executed" CanExecute="CommandBinding_CanExecute"></CommandBinding>

        <CommandBinding Command="local:AdminFrameSet.ShowObject" Executed="CommandBinding_Executed" CanExecute="CommandBinding_CanExecute"></CommandBinding>


    </UserControl.CommandBindings>


    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/NixxisWpfControls;component/Themes/ExpressionDark.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/NixxisWpfControls;component/Themes/ExpressionDarkDataGrid.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/NixxisWpfControls;component/Global.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <nixxis:TranslationConverter x:Key="tcv"></nixxis:TranslationConverter>

            <crs:TranslationContext Context="GlobalSettingsControl" x:Key="tcx"></crs:TranslationContext>

            <local:RightsConverter x:Key="rightsConverter"></local:RightsConverter><local:InvertedRightsConverter x:Key="invertedRightsConverter"></local:InvertedRightsConverter>
            
            <local:SourceChooserConverter2 x:Key="srcChooser2"></local:SourceChooserConverter2>

            <CollectionViewSource x:Key="List" Source="{Binding ExtendedGlobalSettings}" Filter="CollectionViewSource_Filter">
            </CollectionViewSource>

            <local:IsDummyIdConverter x:Key="isDummyId"></local:IsDummyIdConverter>

            <adminlink:DynamicParameterActionHelper x:Key="DynamicParameterActions"></adminlink:DynamicParameterActionHelper>

            <local:ComboStringListConverter x:Key="cboStringConverter" />

            <local:ComboListConverter x:Key="cboConverter" />

            <local:ComboListConverterNoDummies x:Key="cboConverterNoDummies" />

            <CollectionViewSource x:Key="Scripts" Source="{Binding Preprocessors}" Filter="Scripts_Filter"/>
            
            <CollectionViewSource x:Key="ParamDefs" Source="{Binding DynamicParameterDefinitions}"/>

            <CollectionViewSource x:Key="ListQueues" Source="{Binding Queues, Converter={StaticResource cboConverter}}"  />
            <CollectionViewSource x:Key="ListQueuesNoDummies" Source="{Binding Queues, Converter={StaticResource cboConverterNoDummies}}"  />

            <CollectionViewSource x:Key="ListPrompts" Source="{Binding GlobalPrompts.SimplePrompts, Converter={StaticResource cboConverter}}"  />
            <CollectionViewSource x:Key="ListPromptsNoDummies" Source="{Binding GlobalPrompts.SimplePrompts, Converter={StaticResource cboConverterNoDummies}}"  />


            <adminlink:DialDisconnectionReasonHelper x:Key="endReasons"/>

            <adminlink:QualificationActionHelperBase x:Key="actions"/>

            <sys:Int32 x:Key="-1">-1</sys:Int32>

            <sys:Int32 x:Key="1">1</sys:Int32>

            <local:AdminObjectConverter x:Key="adminObjectConverter"></local:AdminObjectConverter>

            <adminlink:NumberingCallTypesHelper x:Key="numberingCallTypes"></adminlink:NumberingCallTypesHelper>

            <nixxis:NixxisExpandPanel x:Key="AdminPanel" Title="Administration toolbar" nixxis:NixxisGrid.Panel="CenterLeft">
                <nixxis:NixxisButton local:RightsManagement.Rights="GlobalSettings.Add" Command="local:AdminFrameSet.AdminObjectAddOperation" CommandTarget="{Binding}" Foreground="{StaticResource OrangeGradient}" ImageSource="Images\Action_Add.png" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Add'}"></nixxis:NixxisButton>
                <nixxis:NixxisButton local:RightsManagement.Rights="GlobalSettings.Duplicate" Command="local:AdminFrameSet.AdminObjectDuplicateOperation" CommandTarget="{Binding}" Foreground="{StaticResource OrangeGradient}" ImageSource="Images\Action_Duplicate.png" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Duplicate'}"></nixxis:NixxisButton>
                <nixxis:NixxisButton local:RightsManagement.Rights="GlobalSettings.Delete" Command="local:AdminFrameSet.AdminObjectDeleteOperation"  CommandTarget="{Binding}" Foreground="{StaticResource OrangeGradient}" ImageSource="Images\Action_Delete.png" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Delete'}"></nixxis:NixxisButton>

                <nixxis:NixxisButton local:RightsManagement.Rights="GlobalSettings.MoveUp" Command="local:AdminFrameSet.AdminObjectMoveUpOperation" CommandTarget="{Binding}" Foreground="{StaticResource OrangeGradient}" ImageSource="Images\Action_MoveUp.png" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Move Up'}"></nixxis:NixxisButton>
                <nixxis:NixxisButton local:RightsManagement.Rights="GlobalSettings.MoveDown" Command="local:AdminFrameSet.AdminObjectMoveDownOperation"  CommandTarget="{Binding}" Foreground="{StaticResource OrangeGradient}" ImageSource="Images\Action_MoveDown.png" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Move Down'}"></nixxis:NixxisButton>

            </nixxis:NixxisExpandPanel>

            <!--Failing due to unknown reason: datagrid is causing issue when used from inside the datatemplate-->
            <!--<DataTemplate DataType="{x:Type adminlink:Location}">
                
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="*"></RowDefinition>
                    </Grid.RowDefinitions>
                
                    <Label Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Numbering rules:'}"></Label>
                    
                    <nixxis:NixxisDataGrid Name="DGNumberingRules" Grid.Row="1" DefaultSortOrder="Sequence" ItemsSource="{Binding NumberingRules}" CanUserAddRows="False" HeadersVisibility="Column" RowDetailsVisibilityMode="Collapsed" IsReadOnly="True">

                        <nixxis:NixxisDataGrid.Columns>

                            <DataGridTemplateColumn IsReadOnly="True">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Image Source="Images\AdminSmall_CallbackRule.png"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTextColumn EditingElementStyle="{StaticResource DatagridTextEdit}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Sequence'}" Binding="{Binding Sequence}"></DataGridTextColumn>
                            <DataGridTextColumn EditingElementStyle="{StaticResource DatagridTextEdit}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Description'}" Binding="{Binding Description}"></DataGridTextColumn>
                    
                        </nixxis:NixxisDataGrid.Columns>

                    </nixxis:NixxisDataGrid>

                </Grid>
            </DataTemplate>-->

            <DataTemplate x:Key="FullView">
                <nixxis:CoverflowElement Margin="5" IsChecked="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type ContentPresenter}}, Path=(nixxis:NixxisCoverFlowPanel.IsSelected), Mode=TwoWay}">
                    <StackPanel Margin="5" Orientation="Vertical">

                        <Label Content="{Binding DisplayText}" ></Label>

                        <Label>
                            <Label.Content>
                                <nixxis:FormatStringExtension TranslationContext="{StaticResource tcx}" FormatString="Created at {0:dd/MM/yyy HH:mm} by {1}">
                                    <nixxis:FormatStringExtension.BindTo>
                                        <MultiBinding>
                                            <Binding Path="CreationTime"></Binding>
                                            <Binding Path="Creator"></Binding>
                                        </MultiBinding>
                                    </nixxis:FormatStringExtension.BindTo>
                                </nixxis:FormatStringExtension>
                            </Label.Content>
                        </Label>

                        <Label>
                            <nixxis:FormatStringExtension TranslationContext="{StaticResource tcx}" FormatString="Modified at {0:dd/MM/yyy HH:mm} by {1}">
                                <nixxis:FormatStringExtension.BindTo>
                                    <MultiBinding>
                                        <Binding Path="ModifyTime"></Binding>
                                        <Binding Path="Modificator"></Binding>
                                    </MultiBinding>
                                </nixxis:FormatStringExtension.BindTo>
                            </nixxis:FormatStringExtension>
                        </Label>

                    </StackPanel>
                </nixxis:CoverflowElement>

            </DataTemplate>

            <nixxis:NixxisExpandCoverFlowPanel x:Key="DetailsPanel" ItemsSource="{Binding Source={StaticResource List}, Path=CurrentItem}" Title="Details" nixxis:NixxisGrid.Panel="CenterRight" ItemTemplate="{StaticResource FullView}" ItemsWidth="350"/>

        </ResourceDictionary>

    </UserControl.Resources>

    <nixxis:PresentationGrid Orientation="{Binding Source={x:Static local:AdminFrameSet.Settings}, Path=PanelsOrientation}" >

        <ComboBox nixxis:PresentationGrid.Meaning="Filter" Name="cboFilter" Margin="5,0,0,0" ItemsSource="{Binding GroupKeysSameType, Converter={StaticResource cboStringConverter}}" DisplayMemberPath="DisplayText" SelectedValue="{x:Null}" SelectedValuePath="Id" DropDownOpened="ComboBox_DropDownOpened" DropDownClosed="ComboBox_DropDownClosed" ></ComboBox>

        <nixxis:NixxisDataGrid nixxis:PresentationGrid.Meaning="List" BorderThickness="0" DefaultSortOrder="Description" Name="MainGrid" SelectedValuePath="Id" SelectedItem="{Binding ElementName=MySelf, Path=SelectedItem}" ItemsSource="{Binding Source={StaticResource List}}" CanUserAddRows="False" HeadersVisibility="Column" RowDetailsVisibilityMode="Collapsed" IsReadOnly="True">

            <nixxis:NixxisDataGrid.Columns>

                <DataGridTemplateColumn IsReadOnly="True">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Image Source="{Binding ., Converter={StaticResource adminObjectConverter}}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTextColumn EditingElementStyle="{StaticResource DatagridTextEdit}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Description'}" Binding="{Binding Description}"></DataGridTextColumn>
                <DataGridTextColumn EditingElementStyle="{StaticResource DatagridTextEdit}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Group'}" Binding="{Binding GroupKey}"></DataGridTextColumn>
            </nixxis:NixxisDataGrid.Columns>

        </nixxis:NixxisDataGrid>

        
        <nixxis:NixxisTabControl nixxis:PresentationGrid.Meaning="Properties" Visibility="{Binding ElementName=MainGrid, Path=SelectedValue, Converter={StaticResource IneqCConverter}, ConverterParameter=globalinfo}"  IsEnabled="{Binding ElementName=MainGrid, Path=SelectedIndex, Converter={StaticResource IneqConverter}, ConverterParameter={StaticResource -1}}">

            <nixxis:NixxisTabControl.DataContext>
                <MultiBinding Converter="{StaticResource srcChooser2}" ConverterParameter="globalinfo" TargetNullValue="{x:Null}" FallbackValue="{x:Null}">
                    <Binding ElementName="MainGrid" Path="SelectedItem"></Binding>
                    <Binding Source="{x:Null}"></Binding>
                </MultiBinding>                
            </nixxis:NixxisTabControl.DataContext>           

            <!--Information-->
            <nixxis:NixxisTabItem >
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <Image Width="25" Height="25" Source="Images\AdminSmall_Resource.png"/>
                        <TextBlock VerticalAlignment="Center" Text="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='General'}"></TextBlock>
                    </StackPanel>
                </TabItem.Header>

                <ScrollViewer CanContentScroll="False" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">

                    <nixxis:NixxisStackPanel>

                        <Label  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Current user info:'}"></Label>
                        <TextBox IsReadOnly="True" Text="{Binding Source={x:Static local:AdminFrameSet.Settings}, Path=CurrentUserInfo, Mode=OneWay}"></TextBox>

                        <Label  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Server edition:'}"></Label>
                        <TextBox IsReadOnly="True" Text="{Binding ServerEditionString, Mode=OneWay}"></TextBox>
                        
                        <Label  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Licenses verified until:'}"></Label>
                        <TextBox IsReadOnly="True" Text="{Binding ValidityString, Mode=OneWay}"></TextBox>

                        <Label Visibility="{Binding LicenseInfoAgentsAvailable, Converter={StaticResource VisWithCollapseConverter}}"  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Agents:'}"></Label>
                        <TextBox Visibility="{Binding LicenseInfoAgentsAvailable, Converter={StaticResource VisWithCollapseConverter}}" IsReadOnly="True" Text="{Binding Agents, Mode=OneWay}"></TextBox>

                        <Label Visibility="{Binding LicenseInfoSupervisorsAvailable, Converter={StaticResource VisWithCollapseConverter}}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Supervisors:'}"></Label>
                        <TextBox Visibility="{Binding LicenseInfoSupervisorsAvailable, Converter={StaticResource VisWithCollapseConverter}}" IsReadOnly="True" Text="{Binding Supervisors, Mode=OneWay}"></TextBox>

                        <Label Visibility="{Binding LicenseInfoInboundAvailable, Converter={StaticResource VisWithCollapseConverter}}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Inbound:'}"></Label>
                        <TextBox Visibility="{Binding LicenseInfoInboundAvailable, Converter={StaticResource VisWithCollapseConverter}}" IsReadOnly="True" Text="{Binding Inbound, Mode=OneWay}"></TextBox>

                        <Label Visibility="{Binding LicenseInfoOutboundAvailable, Converter={StaticResource VisWithCollapseConverter}}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Outbound:'}"></Label>
                        <TextBox Visibility="{Binding LicenseInfoOutboundAvailable, Converter={StaticResource VisWithCollapseConverter}}" IsReadOnly="True" Text="{Binding Outbound, Mode=OneWay}"></TextBox>

                        <Label Visibility="{Binding LicenseInfoPredictiveAvailable, Converter={StaticResource VisWithCollapseConverter}}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Predictive:'}"></Label>
                        <TextBox Visibility="{Binding LicenseInfoPredictiveAvailable, Converter={StaticResource VisWithCollapseConverter}}" IsReadOnly="True" Text="{Binding Predictive, Mode=OneWay}"></TextBox>

                        <Label Visibility="{Binding LicenseInfoChatAvailable, Converter={StaticResource VisWithCollapseConverter}}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Chat:'}"></Label>
                        <TextBox Visibility="{Binding LicenseInfoChatAvailable, Converter={StaticResource VisWithCollapseConverter}}" IsReadOnly="True" Text="{Binding Chat, Mode=OneWay}"></TextBox>

                        <Label Visibility="{Binding LicenseInfoMailAvailable, Converter={StaticResource VisWithCollapseConverter}}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Mail:'}"></Label>
                        <TextBox Visibility="{Binding LicenseInfoMailAvailable, Converter={StaticResource VisWithCollapseConverter}}" IsReadOnly="True" Text="{Binding Mail, Mode=OneWay}"></TextBox>                        

                    </nixxis:NixxisStackPanel>

                </ScrollViewer>

            </nixxis:NixxisTabItem>

        </nixxis:NixxisTabControl>


        <nixxis:NixxisTabControl nixxis:PresentationGrid.Meaning="Properties" Visibility="{Binding ElementName=MainGrid, Path=SelectedValue, Converter={StaticResource IneqCConverter}, ConverterParameter=defaultsetting++++++++++++++++++}" IsEnabled="{Binding ElementName=MainGrid, Path=SelectedIndex, Converter={StaticResource IneqConverter}, ConverterParameter={StaticResource -1}}">

            <nixxis:NixxisTabControl.DataContext>
                <MultiBinding Converter="{StaticResource srcChooser2}" ConverterParameter="defaultsetting++++++++++++++++++" TargetNullValue="{x:Null}" FallbackValue="{x:Null}">
                    <Binding ElementName="MainGrid" Path="SelectedItem"></Binding>
                    <Binding Source="{x:Null}"></Binding>
                </MultiBinding>
            </nixxis:NixxisTabControl.DataContext>
            
            <!--Default settings-->
            <nixxis:NixxisTabItem >
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <Image Width="25" Height="25" Source="Images\AdminSmall_Resource.png"/>
                        <TextBlock VerticalAlignment="Center" Text="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='General'}"></TextBlock>
                    </StackPanel>
                </TabItem.Header>

                <ScrollViewer CanContentScroll="False" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">

                    <nixxis:NixxisStackPanel>

                        <GroupBox Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Telephony settings'}">
                            <nixxis:NixxisStackPanel>
                                <Label  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Default originator:'}"></Label>
                                <TextBox local:RightsManagement.Rights="GlobalSettings.Originator" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.Originator}" Text="{Binding Originator}"></TextBox>
                            </nixxis:NixxisStackPanel>
                        </GroupBox>


                        <GroupBox Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Recording settings'}">
                            <nixxis:NixxisStackPanel>
                                <CheckBox local:RightsManagement.Rights="GlobalSettings.AutoRecording" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.AutoRecording}" IsChecked="{Binding AutomaticRecording}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='By default, record conversations'}"></CheckBox>
                            </nixxis:NixxisStackPanel>
                        </GroupBox>

                        <GroupBox Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Manual call settings'}">
                            <nixxis:NixxisStackPanel>
                                <Label  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Script:'}"></Label>
                                <ComboBox local:RightsManagement.Rights="GlobalSettings.ManualCalls.Script" IsEnabled="{Binding ., Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.ManualCalls.Script}" IsSynchronizedWithCurrentItem="False" ItemsSource="{Binding Source={StaticResource Scripts}}" DisplayMemberPath="DisplayText" SelectedValuePath="Id" SelectedValue="{Binding Script.TargetId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Text="{Binding ScriptUrl, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" IsEditable="True" ></ComboBox>
                            </nixxis:NixxisStackPanel>
                        </GroupBox>


                        <GroupBox Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Wrapup settings'}">
                            <nixxis:NixxisStackPanel>

                                <Label  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Wrapup standard duration:'}"></Label>
                                <nixxis:DurationPicker local:RightsManagement.Rights="GlobalSettings.PostWrapupBehavior.WrapupTime" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.PostWrapupBehavior.WrapupTime}"  Duration="{Binding WrapupTime, Converter={StaticResource MultConverter}, ConverterParameter=1000}" ShowMilliseconds="true"></nixxis:DurationPicker>


                                <CheckBox  local:RightsManagement.Rights="GlobalSettings.PostWrapupBehavior.WrapupExtendable" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.PostWrapupBehavior.WrapupExtendable}" IsChecked="{Binding WrapupExtendable}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Wrapup duration can be extended'}"></CheckBox>


                                <CheckBox IsThreeState="True" local:RightsManagement.Rights="GlobalSettings.PostWrapupBehavior.Alert" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.PostWrapupBehavior.Alert}" IsChecked="{Binding PostWrapupOptionsAlert}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Send alert'}"></CheckBox>
                                <CheckBox IsThreeState="True" local:RightsManagement.Rights="GlobalSettings.PostWrapupBehavior.SupAlert" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.PostWrapupBehavior.SupAlert}" IsChecked="{Binding PostWrapupOptionsSupAlert}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Send supervisor alert'}"></CheckBox>
                                <CheckBox IsThreeState="True"  local:RightsManagement.Rights="GlobalSettings.PostWrapupBehavior.CloseScript" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.PostWrapupBehavior.CloseScript}" IsChecked="{Binding PostWrapupOptionsCloseScript}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Close the script'}"></CheckBox>
                                <CheckBox IsThreeState="True" local:RightsManagement.Rights="GlobalSettings.PostWrapupBehavior.ForceReady" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.PostWrapupBehavior.ForceReady}" IsChecked="{Binding PostWrapupOptionsForceReady}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Force ready'}"></CheckBox>



                            </nixxis:NixxisStackPanel>
                        </GroupBox>

                        <GroupBox Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Auto ready settings'}">
                            <nixxis:NixxisStackPanel>

                                <Label  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Inbound auto ready delay:'}"></Label>
                                <nixxis:DurationPicker ShowSign="False" local:RightsManagement.Rights="GlobalSettings.PostWrapupBehavior.InboundAutoReadyDelay" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.PostWrapupBehavior.InboundAutoReadyDelay}"  Duration="{Binding InboundAutoReadyDelay, Converter={StaticResource MultConverter}, ConverterParameter=1000}" ShowMilliseconds="False"></nixxis:DurationPicker>

                                <Label  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Outbound auto ready delay:'}"></Label>
                                <nixxis:DurationPicker ShowSign="False" local:RightsManagement.Rights="GlobalSettings.PostWrapupBehavior.OutboundAutoReadyDelay" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.PostWrapupBehavior.OutboundAutoReadyDelay}"  Duration="{Binding OutboundAutoReadyDelay, Converter={StaticResource MultConverter}, ConverterParameter=1000}" ShowMilliseconds="False"></nixxis:DurationPicker>

                                <CheckBox local:RightsManagement.Rights="GlobalSettings.PostWrapupBehavior.PostWrapupOptionsReadyWhenScriptIsClosed" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.PostWrapupBehavior.PostWrapupOptionsReadyWhenScriptIsClosed}" IsChecked="{Binding PostWrapupOptionsReadyWhenScriptIsClosed}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Closing the script sets the agent ready'}"></CheckBox>

                            </nixxis:NixxisStackPanel>
                        </GroupBox>

                        
                        
                    </nixxis:NixxisStackPanel>

                </ScrollViewer>

            </nixxis:NixxisTabItem>

            <!--Dynamic parameters-->
            <nixxis:NixxisTabItem Visibility="{Binding Source={StaticResource ParamDefs}, Path=Count, Converter={StaticResource EqCConverter}, ConverterParameter={StaticResource 0}}">
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <Image Width="25" Height="25" Source="Images\AdminSmall_General.png"/>
                        <TextBlock VerticalAlignment="Center" Text="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Dynamic parameters'}"></TextBlock>
                    </StackPanel>
                </TabItem.Header>

                <Grid Margin="10" >
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="*"></RowDefinition>
                    </Grid.RowDefinitions>
                    <Label Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='The list of dynamic parameters and their values:'}"></Label>
                    <nixxis:NixxisDataGrid local:RightsManagement.Rights="GlobalSettings.DynamicParamaters" IsDisabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource invertedRightsConverter}, ConverterParameter=GlobalSettings.DynamicParameters}" DefaultSortOrder="Item.DisplayText" Grid.Row="1" Name="GlobalDGDynamicParameters" EditMode="SingleClick" ItemsSource="{Binding CheckedDynamicParameters}"  CanUserAddRows="False" HeadersVisibility="Column" RowDetailsVisibilityMode="Collapsed">
                        <nixxis:NixxisDataGrid.Columns>
                            <DataGridTemplateColumn IsReadOnly="True">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Image Source="Images\AdminSmall_General.png"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridCheckBoxColumn ElementStyle="{StaticResource DatagridCheckBox}" EditingElementStyle="{StaticResource {x:Type CheckBox}}" Binding="{Binding HasLink, UpdateSourceTrigger=PropertyChanged}"></DataGridCheckBoxColumn>
                            <DataGridTextColumn IsReadOnly="True" EditingElementStyle="{StaticResource DatagridTextEdit}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Parameter'}" Binding="{Binding Item.DisplayText}"></DataGridTextColumn>

                            <DataGridTemplateColumn Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Action'}">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <TextBlock Visibility="{Binding HasLink, Converter={StaticResource VisWithCollapseConverter}}" Text="{Binding Link.Action}">
                                        </TextBlock>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>

                                <DataGridTemplateColumn.CellEditingTemplate>
                                    <DataTemplate>
                                        <ComboBox Visibility="{Binding HasLink, Converter={StaticResource VisWithCollapseConverter}}"
                                            DisplayMemberPath="Description"  
                                            SelectedValuePath="EnumValue" 
                                            SelectedValue="{Binding Link.Action, UpdateSourceTrigger=PropertyChanged}"
                                            ItemsSource="{Binding Source={StaticResource DynamicParameterActions}}"></ComboBox>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellEditingTemplate>
                            </DataGridTemplateColumn>


                            <DataGridTemplateColumn Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Value'}">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <TextBlock Text="{Binding Link.Value, UpdateSourceTrigger=PropertyChanged}">
                                                <TextBlock.Visibility>
                                                    <MultiBinding Converter="{StaticResource VisWithCollapseMultiConverter }" TargetNullValue="Collapsed" >
                                                        <Binding Path="Item.Type"  Converter="{StaticResource EqConverter}" ConverterParameter="{x:Static adminlink:DynamicParameterType.Text}"></Binding>
                                                        <Binding Path="HasLink"></Binding>
                                                    </MultiBinding>
                                                </TextBlock.Visibility>
                                            </TextBlock>

                                            <TextBlock Text="{Binding Link.Value, UpdateSourceTrigger=PropertyChanged}">
                                                <TextBlock.Visibility>
                                                    <MultiBinding Converter="{StaticResource VisWithCollapseMultiConverter }" TargetNullValue="Collapsed" >
                                                        <Binding Path="Item.Type"  Converter="{StaticResource EqConverter}" ConverterParameter="{x:Static adminlink:DynamicParameterType.Numeric}"></Binding>
                                                        <Binding Path="HasLink"></Binding>
                                                    </MultiBinding>
                                                </TextBlock.Visibility>
                                            </TextBlock>

                                            <ContentControl HorizontalContentAlignment="Stretch" VerticalContentAlignment="Stretch" HorizontalAlignment="Center">
                                                <CheckBox IsChecked="{Binding Link.Value, UpdateSourceTrigger=PropertyChanged}" >
                                                    <CheckBox.Visibility>
                                                        <MultiBinding Converter="{StaticResource VisWithCollapseMultiConverter }" TargetNullValue="Collapsed" >
                                                            <Binding Path="Item.Type"  Converter="{StaticResource EqConverter}" ConverterParameter="{x:Static adminlink:DynamicParameterType.Boolean}"></Binding>
                                                            <Binding Path="HasLink"></Binding>
                                                        </MultiBinding>
                                                    </CheckBox.Visibility>
                                                </CheckBox>
                                            </ContentControl>

                                            <TextBlock Text="{Binding Link.Queue.Target.DisplayText, UpdateSourceTrigger=PropertyChanged}" >
                                                <TextBlock.Visibility>
                                                    <MultiBinding Converter="{StaticResource VisWithCollapseMultiConverter }" TargetNullValue="Collapsed" >
                                                        <Binding Path="Item.Type"  Converter="{StaticResource EqConverter}" ConverterParameter="{x:Static adminlink:DynamicParameterType.Queue}"></Binding>
                                                        <Binding Path="HasLink"></Binding>
                                                        <Binding Path="Link.Queue.HasTarget"></Binding>
                                                    </MultiBinding>
                                                </TextBlock.Visibility>
                                            </TextBlock>

                                            <TextBlock Text="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='&lt;None&gt;'}" >
                                                <TextBlock.Visibility>
                                                    <MultiBinding Converter="{StaticResource VisWithCollapseMultiConverter }" ConverterParameter="false,false,true" TargetNullValue="Collapsed" >
                                                        <Binding Path="Item.Type"  Converter="{StaticResource EqConverter}" ConverterParameter="{x:Static adminlink:DynamicParameterType.Queue}"></Binding>
                                                        <Binding Path="HasLink"></Binding>
                                                        <Binding Path="Link.Queue.HasTarget"></Binding>
                                                    </MultiBinding>
                                                </TextBlock.Visibility>
                                            </TextBlock>






                                            <TextBlock Text="{Binding Link.Prompt.Target.DisplayText, UpdateSourceTrigger=PropertyChanged}" >
                                                <TextBlock.Visibility>
                                                    <MultiBinding Converter="{StaticResource VisWithCollapseMultiConverter }" TargetNullValue="Collapsed" >
                                                        <Binding Path="Item.Type"  Converter="{StaticResource EqConverter}" ConverterParameter="{x:Static adminlink:DynamicParameterType.Prompt}"></Binding>
                                                        <Binding Path="HasLink"></Binding>
                                                        <Binding Path="Link.Prompt.HasTarget"></Binding>
                                                    </MultiBinding>
                                                </TextBlock.Visibility>
                                            </TextBlock>

                                            <TextBlock Text="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='&lt;None&gt;'}" >
                                                <TextBlock.Visibility>
                                                    <MultiBinding Converter="{StaticResource VisWithCollapseMultiConverter }" ConverterParameter="false,false,true" TargetNullValue="Collapsed" >
                                                        <Binding Path="Item.Type"  Converter="{StaticResource EqConverter}" ConverterParameter="{x:Static adminlink:DynamicParameterType.Prompt}"></Binding>
                                                        <Binding Path="HasLink"></Binding>
                                                        <Binding Path="Link.Prompt.HasTarget"></Binding>
                                                    </MultiBinding>
                                                </TextBlock.Visibility>
                                            </TextBlock>


                                        </Grid>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                                <DataGridTemplateColumn.CellEditingTemplate>
                                    <DataTemplate>
                                        <Grid>
                                            <TextBox Text="{Binding Link.Value, UpdateSourceTrigger=PropertyChanged}">
                                                <TextBox.Visibility>
                                                    <MultiBinding Converter="{StaticResource VisWithCollapseMultiConverter }" TargetNullValue="Collapsed" >
                                                        <Binding Path="Item.Type"  Converter="{StaticResource EqConverter}" ConverterParameter="{x:Static adminlink:DynamicParameterType.Text}"></Binding>
                                                        <Binding Path="HasLink"></Binding>
                                                    </MultiBinding>
                                                </TextBox.Visibility>
                                            </TextBox>

                                            <nixxis:NumericUpDown Value="{Binding Link.Value, UpdateSourceTrigger=PropertyChanged}" NumberFormat="0">
                                                <nixxis:NumericUpDown.Visibility>
                                                    <MultiBinding Converter="{StaticResource VisWithCollapseMultiConverter }" TargetNullValue="Collapsed" >
                                                        <Binding Path="Item.Type"  Converter="{StaticResource EqConverter}" ConverterParameter="{x:Static adminlink:DynamicParameterType.Numeric}"></Binding>
                                                        <Binding Path="HasLink"></Binding>
                                                    </MultiBinding>
                                                </nixxis:NumericUpDown.Visibility>
                                            </nixxis:NumericUpDown>

                                            <CheckBox IsChecked="{Binding Link.Value, UpdateSourceTrigger=PropertyChanged}" >
                                                <CheckBox.Visibility>
                                                    <MultiBinding Converter="{StaticResource VisWithCollapseMultiConverter }" TargetNullValue="Collapsed" >
                                                        <Binding Path="Item.Type"  Converter="{StaticResource EqConverter}" ConverterParameter="{x:Static adminlink:DynamicParameterType.Boolean}"></Binding>
                                                        <Binding Path="HasLink"></Binding>
                                                    </MultiBinding>
                                                </CheckBox.Visibility>
                                            </CheckBox>

                                            <ComboBox local:RightsManagement.Rights="GlobalSettings.DynamicParameter.Queue" 
                                                      IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.DynamicParameter.Queue}" 
                                                      IsSynchronizedWithCurrentItem="False" 
                                                      ItemsSource="{Binding Source={StaticResource ListQueuesNoDummies}}" DisplayMemberPath="DisplayText" SelectedValuePath="Id" 
                                                      SelectedValue="{Binding Link.Queue.TargetId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                <ComboBox.Visibility>
                                                    <MultiBinding Converter="{StaticResource VisWithCollapseMultiConverter }" TargetNullValue="Collapsed" >
                                                        <Binding Path="Item.Type"  Converter="{StaticResource EqConverter}" ConverterParameter="{x:Static adminlink:DynamicParameterType.Queue}"></Binding>
                                                        <Binding Path="HasLink"></Binding>
                                                        <Binding Path="Link.Queue.TargetId" Converter="{StaticResource isDummyId}" ConverterParameter="true"/>
                                                    </MultiBinding>
                                                </ComboBox.Visibility>
                                            </ComboBox>
                                            <ComboBox local:RightsManagement.Rights="GlobalSettings.DynamicParameter.Queue" 
                                                      IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.DynamicParameter.Queue}" 
                                                      IsSynchronizedWithCurrentItem="False" 
                                                      ItemsSource="{Binding Source={StaticResource ListQueues}}" DisplayMemberPath="DisplayText" SelectedValuePath="Id" 
                                                      SelectedValue="{Binding Link.Queue.TargetId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  >
                                                <ComboBox.Visibility>
                                                    <MultiBinding Converter="{StaticResource VisWithCollapseMultiConverter }" TargetNullValue="Collapsed" >
                                                        <Binding Path="Item.Type"  Converter="{StaticResource EqConverter}" ConverterParameter="{x:Static adminlink:DynamicParameterType.Queue}"></Binding>
                                                        <Binding Path="HasLink"></Binding>
                                                        <Binding Path="Link.Queue.TargetId" Converter="{StaticResource isDummyId}"/>
                                                    </MultiBinding>
                                                </ComboBox.Visibility>

                                            </ComboBox>

                                            <ComboBox local:RightsManagement.Rights="GlobalSettings.DynamicParameter.Prompt" 
                                                      IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.DynamicParameter.Prompt}" 
                                                      IsSynchronizedWithCurrentItem="False" 
                                                      ItemsSource="{Binding Source={StaticResource ListPromptsNoDummies}}" DisplayMemberPath="DisplayText" SelectedValuePath="Id" 
                                                      SelectedValue="{Binding Link.Prompt.TargetId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                                <ComboBox.Visibility>
                                                    <MultiBinding Converter="{StaticResource VisWithCollapseMultiConverter }" TargetNullValue="Collapsed" >
                                                        <Binding Path="Item.Type"  Converter="{StaticResource EqConverter}" ConverterParameter="{x:Static adminlink:DynamicParameterType.Prompt}"></Binding>
                                                        <Binding Path="HasLink"></Binding>
                                                        <Binding Path="Link.Prompt.TargetId" Converter="{StaticResource isDummyId}" ConverterParameter="true"/>
                                                    </MultiBinding>
                                                </ComboBox.Visibility>
                                            </ComboBox>
                                            <ComboBox local:RightsManagement.Rights="GlobalSettings.DynamicParameter.Prompt" 
                                                      IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.DynamicParameter.Prompt}" 
                                                      IsSynchronizedWithCurrentItem="False" 
                                                      ItemsSource="{Binding Source={StaticResource ListPrompts}}" DisplayMemberPath="DisplayText" SelectedValuePath="Id" 
                                                      SelectedValue="{Binding Link.Prompt.TargetId, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"  >
                                                <ComboBox.Visibility>
                                                    <MultiBinding Converter="{StaticResource VisWithCollapseMultiConverter }" TargetNullValue="Collapsed" >
                                                        <Binding Path="Item.Type"  Converter="{StaticResource EqConverter}" ConverterParameter="{x:Static adminlink:DynamicParameterType.Prompt}"></Binding>
                                                        <Binding Path="HasLink"></Binding>
                                                        <Binding Path="Link.Prompt.TargetId" Converter="{StaticResource isDummyId}"/>
                                                    </MultiBinding>
                                                </ComboBox.Visibility>

                                            </ComboBox>

                                        </Grid>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellEditingTemplate>
                            </DataGridTemplateColumn>





                        </nixxis:NixxisDataGrid.Columns>
                    </nixxis:NixxisDataGrid>
                </Grid>

            </nixxis:NixxisTabItem>


            <!--Rights-->
            <nixxis:NixxisTabItem >
                <nixxis:NixxisTabItem.Visibility>
                    <MultiBinding Converter="{StaticResource BoolMultiAndConverter}" TargetNullValue="Collapsed">
                        <Binding Source="{x:Static local:AdminFrameSet.Settings}" Path="IsFullVersion"  ></Binding>
                        <Binding Path="IsRightsHandlingAllowed"></Binding>
                    </MultiBinding>
                </nixxis:NixxisTabItem.Visibility>

                <TabItem.Header>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <Image Width="25" Height="25" Source="Images\AdminSmall_Resource.png"/>
                        <TextBlock VerticalAlignment="Center" Text="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Rights'}"></TextBlock>
                    </StackPanel>
                </TabItem.Header>

                <Grid Margin="10" >
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"></RowDefinition>
                        <RowDefinition Height="*"></RowDefinition>
                        <RowDefinition Height="*"></RowDefinition>
                    </Grid.RowDefinitions>

                    <Label Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='List of roles and their default rights:'}"></Label>

                    <nixxis:NixxisDataGrid Grid.Row="1" local:RightsManagement.Rights="GlobalSettings.Rights" IsDisabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource invertedRightsConverter}, ConverterParameter=GlobalSettings.Rights}" DefaultSortOrder="DisplayText" Name="DGRights" EditMode="SingleClick" Margin="10" ItemsSource="{Binding RolesOverview}" CanUserAddRows="False" HeadersVisibility="Column" RowDetailsVisibilityMode="Collapsed" Loaded="DGRights_Loaded"  >
                        <nixxis:NixxisDataGrid.Columns>
                            <DataGridTemplateColumn IsReadOnly="True">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Image Source="Images\AdminSmall_Rights.png"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTextColumn IsReadOnly="True" EditingElementStyle="{StaticResource DatagridTextEdit}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Role'}" Binding="{Binding DisplayText}"></DataGridTextColumn>

                            <DataGridTextColumn IsReadOnly="True" EditingElementStyle="{StaticResource DatagridTextEdit}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Rights'}" Binding="{Binding Overview}"></DataGridTextColumn>

                        </nixxis:NixxisDataGrid.Columns>

                        <nixxis:NixxisDataGrid.ContextMenu>
                            <ContextMenu>
                                <MenuItem Visibility="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsEnabled, Converter={StaticResource VisWithCollapseConverter}}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Go to definition'}" Command="local:AdminFrameSet.ShowObject" CommandParameter="{Binding RelativeSource={RelativeSource Self}, Path=Parent}"></MenuItem>
                            </ContextMenu>
                        </nixxis:NixxisDataGrid.ContextMenu>
                    </nixxis:NixxisDataGrid>

                    <nixxis:NixxisDataGrid Grid.Row="2" local:RightsManagement.Rights="GlobalSettings.Rights" IsDisabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource invertedRightsConverter}, ConverterParameter=GlobalSettings.Rights}" Name="DGSubRights" EditMode="SingleClick" Margin="10" ItemsSource="{Binding ElementName=DGRights, Path=SelectedItem.Security}" CanUserAddRows="False" HeadersVisibility="Column" RowDetailsVisibilityMode="Collapsed"  >
                        <nixxis:NixxisDataGrid.Columns>
                            <DataGridTemplateColumn IsReadOnly="True">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Image Source="{Binding ., Converter={StaticResource adminObjectConverter}}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>

                            <DataGridTextColumn IsReadOnly="True" EditingElementStyle="{StaticResource DatagridTextEdit}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Right'}" Binding="{Binding RightDescription}"></DataGridTextColumn>

                            <nixxis:NixxisDataGridCheckBoxColumn EnabledBinding="{Binding IsListAllowedEnabled}" VisibilityBinding="{Binding IsListAllowedVisible, Converter={StaticResource VisWithCollapseConverter}}" ElementStyle="{StaticResource DatagridCheckBox}" EditingElementStyle="{StaticResource {x:Type CheckBox}}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='List'}" Binding="{Binding ListAllowed, UpdateSourceTrigger=PropertyChanged}" IsThreeState="True">
                            </nixxis:NixxisDataGridCheckBoxColumn>

                            <nixxis:NixxisDataGridCheckBoxColumn EnabledBinding="{Binding IsReadAllowedEnabled}" VisibilityBinding="{Binding IsReadAllowedVisible, Converter={StaticResource VisWithCollapseConverter}}" ElementStyle="{StaticResource DatagridCheckBox}" EditingElementStyle="{StaticResource {x:Type CheckBox}}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Read'}" Binding="{Binding ReadAllowed, UpdateSourceTrigger=PropertyChanged}" IsThreeState="True">
                            </nixxis:NixxisDataGridCheckBoxColumn>

                            <nixxis:NixxisDataGridCheckBoxColumn EnabledBinding="{Binding IsWriteAllowedEnabled}" VisibilityBinding="{Binding IsWriteAllowedVisible, Converter={StaticResource VisWithCollapseConverter}}" ElementStyle="{StaticResource DatagridCheckBox}" EditingElementStyle="{StaticResource {x:Type CheckBox}}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Write'}" Binding="{Binding WriteAllowed, UpdateSourceTrigger=PropertyChanged}" IsThreeState="True" >
                            </nixxis:NixxisDataGridCheckBoxColumn>

                            <nixxis:NixxisDataGridCheckBoxColumn EnabledBinding="{Binding IsCreateAllowedEnabled}" VisibilityBinding="{Binding IsCreateAllowedVisible, Converter={StaticResource VisWithCollapseConverter}}" ElementStyle="{StaticResource DatagridCheckBox}" EditingElementStyle="{StaticResource {x:Type CheckBox}}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Create'}" Binding="{Binding CreateAllowed, UpdateSourceTrigger=PropertyChanged}" IsThreeState="True" >
                            </nixxis:NixxisDataGridCheckBoxColumn>

                            <nixxis:NixxisDataGridCheckBoxColumn EnabledBinding="{Binding IsDeleteAllowedEnabled}" VisibilityBinding="{Binding IsDeleteAllowedVisible, Converter={StaticResource VisWithCollapseConverter}}" ElementStyle="{StaticResource DatagridCheckBox}" EditingElementStyle="{StaticResource {x:Type CheckBox}}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Delete'}" Binding="{Binding DeleteAllowed, UpdateSourceTrigger=PropertyChanged}" IsThreeState="True" >
                            </nixxis:NixxisDataGridCheckBoxColumn>

                            <nixxis:NixxisDataGridCheckBoxColumn EnabledBinding="{Binding IsPowerUserEnabled}" VisibilityBinding="{Binding IsPowerUserVisible, Converter={StaticResource VisWithCollapseConverter}}" ElementStyle="{StaticResource DatagridCheckBox}" EditingElementStyle="{StaticResource {x:Type CheckBox}}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Power'}" Binding="{Binding PowerUser, UpdateSourceTrigger=PropertyChanged}" IsThreeState="True">
                            </nixxis:NixxisDataGridCheckBoxColumn>

                            <nixxis:NixxisDataGridCheckBoxColumn EnabledBinding="{Binding IsFullControlEnabled}" VisibilityBinding="{Binding IsFullControlVisible, Converter={StaticResource VisWithCollapseConverter}}" ElementStyle="{StaticResource DatagridCheckBox}" EditingElementStyle="{StaticResource {x:Type CheckBox}}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Full'}" Binding="{Binding FullControl, UpdateSourceTrigger=PropertyChanged}" IsThreeState="True" >
                            </nixxis:NixxisDataGridCheckBoxColumn>

                        </nixxis:NixxisDataGrid.Columns>

                    </nixxis:NixxisDataGrid>



                </Grid>

            </nixxis:NixxisTabItem>


        </nixxis:NixxisTabControl>
        

        <nixxis:NixxisTabControl nixxis:PresentationGrid.Meaning="Properties" Visibility="{Binding ElementName=MainGrid, Path=SelectedValue, Converter={StaticResource IneqCConverter}, ConverterParameter=defaultresource+++++++++++++++++}" IsEnabled="{Binding ElementName=MainGrid, Path=SelectedIndex, Converter={StaticResource IneqConverter}, ConverterParameter={StaticResource -1}}">

            <nixxis:NixxisTabControl.DataContext>
                <MultiBinding Converter="{StaticResource srcChooser2}" ConverterParameter="defaultresource+++++++++++++++++" TargetNullValue="{x:Null}" FallbackValue="{x:Null}">
                    <Binding ElementName="MainGrid" Path="SelectedItem"></Binding>
                    <Binding Source="{x:Null}"></Binding>
                </MultiBinding>
            </nixxis:NixxisTabControl.DataContext>


            <!--Resources-->
            <nixxis:NixxisTabItem >
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <Image Width="25" Height="25" Source="Images\AdminSmall_Resource.png"/>
                        <TextBlock VerticalAlignment="Center" Text="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='General'}"></TextBlock>
                    </StackPanel>
                </TabItem.Header>

                <ScrollViewer CanContentScroll="False" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">

                        <nixxis:NixxisStackPanel>

                            <Label  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Base URI:'}"></Label>
                            <TextBox local:RightsManagement.Rights="GlobalSettings.Resource.BaseUri" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.Resource.BaseUri}" Text="{Binding BaseUri, NotifyOnSourceUpdated=True}" SourceUpdated="TextBox_SourceUpdated" ></TextBox>

                            <nixxis:NixxisDetailedCheckBox local:RightsManagement.Rights="GlobalSettings.Resource.OutboundLinesLimit" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.Resource.OutboundLinesLimit}" Name="ndcbOutboundLinesLimit" IsChecked="{Binding MaxOutLinesLimited}" DetailContent="{Binding MaxOutLines}" DetailVisibility="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked, Converter={StaticResource VisWithCollapseConverter}}"  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Outbound lines limit'}"></nixxis:NixxisDetailedCheckBox>
                            <nixxis:NumericUpDown MinimumValue="0" NumberFormat="0" Value="{Binding MaxOutLines}" Visibility="{Binding ElementName=ndcbOutboundLinesLimit, Path=IsDetailChecked, Converter={StaticResource VisWithCollapseConverter}}"></nixxis:NumericUpDown>

                            <nixxis:NixxisDetailedCheckBox local:RightsManagement.Rights="GlobalSettings.Resource.InboundLinesLimit" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.Resource.InboundLinesLimit}" Name="ndcbInboundLinesLimit" IsChecked="{Binding MaxInLinesLimited}" DetailContent="{Binding MaxInLines}" DetailVisibility="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked, Converter={StaticResource VisWithCollapseConverter}}"  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Inbound lines limit'}"></nixxis:NixxisDetailedCheckBox>
                            <nixxis:NumericUpDown MinimumValue="0" NumberFormat="0" Value="{Binding MaxInLines}" Visibility="{Binding ElementName=ndcbInboundLinesLimit, Path=IsDetailChecked, Converter={StaticResource VisWithCollapseConverter}}"></nixxis:NumericUpDown>

                            <nixxis:NixxisDetailedCheckBox local:RightsManagement.Rights="GlobalSettings.Resource.LinesLimit" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.Resource.LinesLimit}" Name="ndcbTotalLinesLimit" IsChecked="{Binding MaxLinesLimited}" DetailContent="{Binding MaxLines}" DetailVisibility="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked, Converter={StaticResource VisWithCollapseConverter}}"  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Total lines limit'}"></nixxis:NixxisDetailedCheckBox>
                            <nixxis:NumericUpDown MinimumValue="0" NumberFormat="0" Value="{Binding MaxLines}" Visibility="{Binding ElementName=ndcbTotalLinesLimit, Path=IsDetailChecked, Converter={StaticResource VisWithCollapseConverter}}"></nixxis:NumericUpDown>

                            <nixxis:NixxisDetailedCheckBox Visibility="Collapsed" local:RightsManagement.Rights="GlobalSettings.Resource.QueueLoopPlayer" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.Resource.QueueLoopPlayer}" Name="ndcbQueueLoop" IsChecked="{Binding QueueLoopPlayerEnabled}" DetailContent="{Binding QueueLoopPlayer}" DetailVisibility="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked, Converter={StaticResource VisWithCollapseConverter}}"  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Queue loop player'}"></nixxis:NixxisDetailedCheckBox>
                            <TextBox Visibility="Collapsed" Text="{Binding QueueLoopPlayer}" ></TextBox>

                            <nixxis:NixxisDetailedCheckBox Visibility="Collapsed" local:RightsManagement.Rights="GlobalSettings.Resource.OutboundGateway" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.Resource.OutboundGateway}" Name="ndcbOutboundGateway" IsChecked="{Binding OutboundGatewayEnabled}" DetailContent="{Binding OutboundGateway}" DetailVisibility="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked, Converter={StaticResource VisWithCollapseConverter}}"  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Outbound gateway'}"></nixxis:NixxisDetailedCheckBox>
                            <TextBox Visibility="Collapsed" Text="{Binding OutboundGateway}" ></TextBox>

                            <nixxis:NixxisDetailedCheckBox Visibility="Collapsed" local:RightsManagement.Rights="GlobalSettings.Resource.IVRPlayer" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.Resource.IVRPlayer}" Name="ndcbIvrPlayer" IsChecked="{Binding IvrPlayerEnabled}" DetailContent="{Binding IvrPlayer}" DetailVisibility="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked, Converter={StaticResource VisWithCollapseConverter}}"  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='IVR player'}"></nixxis:NixxisDetailedCheckBox>
                            <TextBox Visibility="Collapsed" Text="{Binding IvrPlayer}"></TextBox>

                            <nixxis:NixxisDetailedCheckBox Visibility="Collapsed" local:RightsManagement.Rights="GlobalSettings.Resource.HoldMusicPlayer" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.Resource.HoldMusicPlayer}" Name="ndcbHoldMusicPlayer" IsChecked="{Binding HoldMusicPlayerEnabled}" DetailContent="{Binding HoldMusicPlayer}" DetailVisibility="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked, Converter={StaticResource VisWithCollapseConverter}}"  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Hold music player'}"></nixxis:NixxisDetailedCheckBox>
                            <TextBox Visibility="Collapsed" Text="{Binding HoldMusicPlayer}" ></TextBox>

                            <nixxis:NixxisDetailedCheckBox Visibility="Collapsed" local:RightsManagement.Rights="GlobalSettings.Resource.AnsweringMachineDetector" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.Resource.AnsweringMachineDetector}" Name="ndcbAnsweringMachineDetector" IsChecked="{Binding AnsweringMachineDetectorEnabled}" DetailContent="{Binding AnsweringMachineDetector}" DetailVisibility="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked, Converter={StaticResource VisWithCollapseConverter}}"  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Answering machine detector'}"></nixxis:NixxisDetailedCheckBox>
                            <TextBox Visibility="Collapsed" Text="{Binding AnsweringMachineDetector}"></TextBox>

                            <nixxis:NixxisDetailedCheckBox Visibility="Collapsed" local:RightsManagement.Rights="GlobalSettings.Resource.Ringer" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.Resource.Ringer}" Name="ndcbRinger" IsChecked="{Binding RingerEnabled}" DetailContent="{Binding Ringer}" DetailVisibility="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked, Converter={StaticResource VisWithCollapseConverter}}"  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Ringer'}"></nixxis:NixxisDetailedCheckBox>
                            <TextBox Visibility="Collapsed" Text="{Binding Ringer}" ></TextBox>

                            <nixxis:NixxisDetailedCheckBox Visibility="Collapsed" local:RightsManagement.Rights="GlobalSettings.Resource.Announcer" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.Resource.Announcer}" Name="ndcbAnnouncer" IsChecked="{Binding AnnouncerEnabled}" DetailContent="{Binding Announcer}" DetailVisibility="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked, Converter={StaticResource VisWithCollapseConverter}}"  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Announcer'}"></nixxis:NixxisDetailedCheckBox>
                            <TextBox Visibility="Collapsed" Text="{Binding Announcer}"></TextBox>

                            <nixxis:NixxisDetailedCheckBox Visibility="Collapsed" local:RightsManagement.Rights="GlobalSettings.Resource.ConferenceBridge" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.Resource.ConferenceBridge}" Name="ndcbConferenceBridge" IsChecked="{Binding ConferenceBridgeEnabled}" DetailContent="{Binding ConferenceBridge}" DetailVisibility="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked, Converter={StaticResource VisWithCollapseConverter}}"  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Conference bridge'}"></nixxis:NixxisDetailedCheckBox>
                            <TextBox Visibility="Collapsed" Text="{Binding ConferenceBridge}" ></TextBox>

                            <nixxis:NixxisDetailedCheckBox Visibility="Collapsed" local:RightsManagement.Rights="GlobalSettings.Resource.Recording" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.Resource.Recording}" Name="ndcbRecording" IsChecked="{Binding RecordingEnabled}" DetailContent="{Binding Recording}" DetailVisibility="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked, Converter={StaticResource VisWithCollapseConverter}}"  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Recorder'}"></nixxis:NixxisDetailedCheckBox>
                            <TextBox Visibility="Collapsed" Text="{Binding Recording}" ></TextBox>

                            <nixxis:NixxisDetailedCheckBox Visibility="Collapsed" local:RightsManagement.Rights="GlobalSettings.Resource.RecordingPlayer" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.Resource.RecordingPlayer}" Name="ndcbRecordingPlayer" IsChecked="{Binding RecordingPlayerEnabled}" DetailContent="{Binding RecordingPlayer}" DetailVisibility="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked, Converter={StaticResource VisWithCollapseConverter}}"  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Recording player'}"></nixxis:NixxisDetailedCheckBox>
                            <TextBox Visibility="Collapsed" Text="{Binding RecordingPlayer}" ></TextBox>

                            <nixxis:NixxisDetailedCheckBox Visibility="Collapsed" local:RightsManagement.Rights="GlobalSettings.Resource.Monitoring" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.Resource.Monitoring}" Name="ndcbMonitoring" IsChecked="{Binding MonitoringEnabled}" DetailContent="{Binding Monitoring}" DetailVisibility="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked, Converter={StaticResource VisWithCollapseConverter}}"  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Monitoring'}"></nixxis:NixxisDetailedCheckBox>
                            <TextBox Visibility="Collapsed" Text="{Binding Monitoring}" ></TextBox>

                        </nixxis:NixxisStackPanel>

                </ScrollViewer>

            </nixxis:NixxisTabItem>

        </nixxis:NixxisTabControl>


        <nixxis:NixxisTabControl nixxis:PresentationGrid.Meaning="Properties" Visibility="{Binding ElementName=MainGrid, Path=SelectedValue, Converter={StaticResource IneqCConverter}, ConverterParameter=defaultlocation+++++++++++++++++}" IsEnabled="{Binding ElementName=MainGrid, Path=SelectedIndex, Converter={StaticResource IneqConverter}, ConverterParameter={StaticResource -1}}">

            <nixxis:NixxisTabControl.DataContext>
                <MultiBinding Converter="{StaticResource srcChooser2}" ConverterParameter="defaultlocation+++++++++++++++++" TargetNullValue="{x:Null}" FallbackValue="{x:Null}">
                    <Binding ElementName="MainGrid" Path="SelectedItem"></Binding>
                    <Binding Source="{x:Null}"></Binding>
                </MultiBinding>
            </nixxis:NixxisTabControl.DataContext>

            <!--General locations (=numbering rules)-->
            <nixxis:NixxisTabItem Name="tabNumRules" >
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <Image Width="25" Height="25" Source="Images\AdminSmall_Location.png"/>
                        <TextBlock VerticalAlignment="Center" Text="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='General'}"></TextBlock>
                    </StackPanel>
                </TabItem.Header>

                <Grid >

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                    </Grid.ColumnDefinitions>

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"></RowDefinition>
                            <RowDefinition Height="*"></RowDefinition>
                        </Grid.RowDefinitions>

                        <Label Margin="0,8,0,0" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Numbering rules:'}"></Label>

                        <nixxis:NixxisDataGrid Grid.Row="1" Name="DGNumberingRules" DefaultSortOrder="Sequence" ItemsSource="{Binding NumberingRules}" CanUserSortColumns="False" CanUserAddRows="False" HeadersVisibility="Column" RowDetailsVisibilityMode="Collapsed" IsReadOnly="True">

                            <nixxis:NixxisDataGrid.Columns>

                                <DataGridTemplateColumn IsReadOnly="True">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Image Source="Images\AdminSmall_CallbackRule.png"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                                <DataGridTextColumn Visibility="Collapsed" EditingElementStyle="{StaticResource DatagridTextEdit}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Sequence'}" Binding="{Binding Sequence}"></DataGridTextColumn>
                                <DataGridTextColumn EditingElementStyle="{StaticResource DatagridTextEdit}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Description'}" Binding="{Binding Explanation}"></DataGridTextColumn>

                            </nixxis:NixxisDataGrid.Columns>

                        </nixxis:NixxisDataGrid>

                    </Grid>

                    <GridSplitter IsTabStop="False" Grid.Column="1" Grid.RowSpan="10" Margin="5,0,5,0"  ResizeDirection="Columns" Width="2" VerticalAlignment="Stretch" HorizontalAlignment="Center"  ></GridSplitter>

                    <ScrollViewer IsEnabled="{Binding ElementName=DGNumberingRules, Path=SelectedIndex, Converter={StaticResource IneqConverter}, ConverterParameter={StaticResource -1} }" Grid.Column="2" Grid.RowSpan="10" CanContentScroll="False" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">

                        <Grid>

                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"></RowDefinition>
                                <RowDefinition Height="Auto"></RowDefinition>
                                <RowDefinition Height="Auto"></RowDefinition>
                                <RowDefinition Height="Auto"></RowDefinition>
                                <RowDefinition Height="Auto"></RowDefinition>
                            </Grid.RowDefinitions>

                            <Label Margin="0,8,0,0" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Description:'}"></Label>
                            <TextBox local:RightsManagement.Rights="GlobalSettings.Location.NumberingRule.Description" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.Location.NumberingRule.Description}" Grid.Row="1" Text="{Binding ElementName=DGNumberingRules, Path=SelectedItem.Description}"></TextBox>

                            <GroupBox Grid.Row="2" Margin="0,8,0,0">
                                <GroupBox.Header>
                                    <nixxis:NixxisDetailedToggle local:RightsManagement.Rights="GlobalSettings.Location.NumberingRule.ConditionDetail" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.Location.NumberingRule.ConditionDetail}" Name="ConditionDetail" DetailContent="{Binding ElementName=DGNumberingRules, Path=SelectedItem.ConditionsDescription}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Condition'}"></nixxis:NixxisDetailedToggle>
                                </GroupBox.Header>

                                <nixxis:NixxisStackPanel Visibility="{Binding ElementName=ConditionDetail, Path=IsChecked, Converter={StaticResource VisWithCollapseConverter}}">
                                    <Label Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Call type:'}"></Label>
                                    <ComboBox  ItemsSource="{StaticResource numberingCallTypes}" SelectedValuePath="EnumValue" DisplayMemberPath="Description" SelectedValue="{Binding ElementName=DGNumberingRules, Path=SelectedItem.NumberingCallType}"></ComboBox>

                                    <Label Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Source:'}"></Label>
                                    <TextBox nixxis:NixxisStackPanel.KeepNextAttached="True" Text="{Binding ElementName=DGNumberingRules, Path=SelectedItem.Source}"></TextBox>
                                    <ToggleButton Margin="5,0,0,0" VerticalAlignment="Center" IsChecked="{Binding ElementName=DGNumberingRules, Path=SelectedItem.SourceIsRegexp}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Regexp'}"></ToggleButton>

                                    <Label Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Destination:'}"></Label>
                                    <TextBox nixxis:NixxisStackPanel.KeepNextAttached="True" Text="{Binding ElementName=DGNumberingRules, Path=SelectedItem.Destination}"></TextBox>
                                    <ToggleButton Margin="5,0,0,0" VerticalAlignment="Center"  IsChecked="{Binding ElementName=DGNumberingRules, Path=SelectedItem.DestinationIsRegexp}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Regexp'}"></ToggleButton>
                                </nixxis:NixxisStackPanel>
                            </GroupBox>

                            <GroupBox Grid.Row="3" Margin="0,8,0,0">
                                <GroupBox.Header>
                                    <nixxis:NixxisDetailedToggle local:RightsManagement.Rights="GlobalSettings.Location.NumberingRule.ActionDetail" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.Location.NumberingRule.ActionDetail}" Name="ActionDetail" DetailContent="{Binding ElementName=DGNumberingRules, Path=SelectedItem.ActionDescription}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Action when rule matches'}"></nixxis:NixxisDetailedToggle>
                                </GroupBox.Header>

                                <nixxis:NixxisStackPanel Visibility="{Binding ElementName=ActionDetail, Path=IsChecked, Converter={StaticResource VisWithCollapseConverter}}">
                                    <CheckBox IsChecked="{Binding ElementName=DGNumberingRules, Path=SelectedItem.Allowed }" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Routing is allowed'}"></CheckBox>

                                    <Label Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Source replacement:'}"></Label>
                                    <TextBox Text="{Binding ElementName=DGNumberingRules, Path=SelectedItem.SourceReplace}"></TextBox>

                                    <Label Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Destination replacement:'}"></Label>
                                    <TextBox Text="{Binding ElementName=DGNumberingRules, Path=SelectedItem.DestinationReplace}"></TextBox>

                                    <!--<Label Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Carrier selection:'}"></Label>
                                    <TextBox Text="{Binding ElementName=DGNumberingRules, Path=SelectedItem.CarrierSelection}"></TextBox>-->
                                </nixxis:NixxisStackPanel>
                            </GroupBox>

                        </Grid>
                    </ScrollViewer>

                </Grid>

            </nixxis:NixxisTabItem>

        </nixxis:NixxisTabControl>

        
        <nixxis:NixxisTabControl nixxis:PresentationGrid.Meaning="Properties" Visibility="{Binding ElementName=MainGrid, Path=SelectedValue, Converter={StaticResource IneqCConverter}, ConverterParameter=defaultcbrules++++++++++++++++++}" IsEnabled="{Binding ElementName=MainGrid, Path=SelectedIndex, Converter={StaticResource IneqConverter}, ConverterParameter={StaticResource -1}}">

            <nixxis:NixxisTabControl.DataContext>
                <MultiBinding Converter="{StaticResource srcChooser2}" ConverterParameter="defaultcbrules++++++++++++++++++" TargetNullValue="{x:Null}" FallbackValue="{x:Null}">
                    <Binding ElementName="MainGrid" Path="SelectedItem"></Binding>
                    <Binding Source="{x:Null}"></Binding>
                </MultiBinding>
            </nixxis:NixxisTabControl.DataContext>

            <!--General callback rules-->
            <nixxis:NixxisTabItem>
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <Image Width="25" Height="25" Source="Images\AdminSmall_CallbackRule.png"/>
                        <TextBlock VerticalAlignment="Center" Text="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='General'}"></TextBlock>
                    </StackPanel>
                </TabItem.Header>
                <ScrollViewer CanContentScroll="False" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                        </Grid.ColumnDefinitions>


                        <nixxis:NixxisStackPanel>

                            <Label Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Default callback duration:'}"></Label>
                            <nixxis:DurationPicker local:RightsManagement.Rights="GlobalSettings.CallbackRules.DefaultCallbackDuration" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.CallbackRules.DefaultCallbackDuration}" Duration="{Binding CallbackValidity, Converter={StaticResource CoefConverter}, ConverterParameter=60}" ShowSeconds="False"></nixxis:DurationPicker>

                            <nixxis:NixxisDetailedCheckBox local:RightsManagement.Rights="GlobalSettings.CallbackRule.MaxDialAttempts" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.CallbackRule.MaxDialAttempts}"  Name="ndcbMaxDialAttempts" IsChecked="{Binding MaxDialAttemptsLimited}" DetailContent="{nixxis:FormatString FormatString='{}{0}', BindTo={Binding MaxDialAttempts}}" DetailVisibility="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsChecked, Converter={StaticResource VisWithCollapseConverter}}"  Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Max dial attempts'}"></nixxis:NixxisDetailedCheckBox>
                            <nixxis:NumericUpDown MinimumValue="0" NumberFormat="0" Value="{Binding MaxDialAttempts}" Visibility="{Binding ElementName=ndcbMaxDialAttempts, Path=IsDetailChecked, Converter={StaticResource VisWithCollapseConverter}}"></nixxis:NumericUpDown>


                        </nixxis:NixxisStackPanel>

                        <GridSplitter IsTabStop="False" Grid.Column="1" Grid.RowSpan="10" Margin="5,0,5,0"  ResizeDirection="Columns" Width="2" VerticalAlignment="Stretch" HorizontalAlignment="Center"  ></GridSplitter>

                        <nixxis:NixxisStackPanel Grid.Column="2">

                        </nixxis:NixxisStackPanel>
                    </Grid>
                </ScrollViewer>
            </nixxis:NixxisTabItem>

            <!--Rules-->
            <nixxis:NixxisTabItem Name="tabCBRules">
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <Image Width="25" Height="25" Source="Images\AdminSmall_CallFlow.png"/>
                        <TextBlock VerticalAlignment="Center" Text="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Rules'}"></TextBlock>
                    </StackPanel>
                </TabItem.Header>

                <Grid>

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                        <ColumnDefinition Width="Auto"></ColumnDefinition>
                        <ColumnDefinition Width="*"></ColumnDefinition>
                    </Grid.ColumnDefinitions>

                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"></RowDefinition>
                            <RowDefinition Height="*"></RowDefinition>
                        </Grid.RowDefinitions>

                        <Label Margin="0,8,0,0" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Callback rules:'}"></Label>

                        <nixxis:NixxisDataGrid Grid.Row="1" Name="DGCallbackRules" DefaultSortOrder="Sequence" ItemsSource="{Binding Rules}" CanUserAddRows="False" CanUserSortColumns="False" HeadersVisibility="Column" RowDetailsVisibilityMode="Collapsed" IsReadOnly="True">

                            <nixxis:NixxisDataGrid.Columns>

                                <DataGridTemplateColumn IsReadOnly="True">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Image Source="Images\AdminSmall_CallbackRule.png"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                                <DataGridTextColumn Visibility="Collapsed" EditingElementStyle="{StaticResource DatagridTextEdit}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Sequence'}" Binding="{Binding Sequence}"></DataGridTextColumn>
                                <DataGridTextColumn EditingElementStyle="{StaticResource DatagridTextEdit}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Description'}" Binding="{Binding Explanation}"></DataGridTextColumn>

                            </nixxis:NixxisDataGrid.Columns>

                        </nixxis:NixxisDataGrid>

                    </Grid>

                    <GridSplitter IsTabStop="False" Grid.Column="1" Grid.RowSpan="10" Margin="5,0,5,0"  ResizeDirection="Columns" Width="2" VerticalAlignment="Stretch" HorizontalAlignment="Center"  ></GridSplitter>

                    <ScrollViewer IsEnabled="{Binding ElementName=DGCallbackRules, Path=SelectedIndex, Converter={StaticResource IneqConverter}, ConverterParameter={StaticResource -1} }" Grid.Column="2" Grid.RowSpan="10" CanContentScroll="False" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto">

                        <Grid>

                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"></RowDefinition>
                                <RowDefinition Height="Auto"></RowDefinition>
                                <RowDefinition Height="Auto"></RowDefinition>
                                <RowDefinition Height="Auto"></RowDefinition>
                                <RowDefinition Height="Auto"></RowDefinition>
                            </Grid.RowDefinitions>


                            <GroupBox Grid.Row="2" Margin="0,8,0,0">
                                <GroupBox.Header>
                                    <nixxis:NixxisDetailedToggle local:RightsManagement.Rights="GlobalSettings.CallbackRules.Rule.ConditionDetails" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.CallbackRules.Rule.ConditionDetails}" Name="CBConditionDetail" DetailContent="{Binding ElementName=DGCallbackRules, Path=SelectedItem.ConditionsDescription}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Condition to apply rule'}"></nixxis:NixxisDetailedToggle>
                                </GroupBox.Header>

                                <nixxis:NixxisStackPanel Visibility="{Binding ElementName=CBConditionDetail, Path=IsChecked, Converter={StaticResource VisWithCollapseConverter}}">
                                    <Label Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='End reason:'}"></Label>
                                    <ComboBox ItemsSource="{StaticResource endReasons}" SelectedValuePath="EnumValue" DisplayMemberPath="Description" SelectedValue="{Binding ElementName=DGCallbackRules, Path=SelectedItem.EndReason}"></ComboBox>

                                    <Label Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Repeated at least:'}"></Label>
                                    <nixxis:NumericUpDown NumberFormat="0" Value="{Binding ElementName=DGCallbackRules, Path=SelectedItem.ConsecutiveStatusCount}" ></nixxis:NumericUpDown>

                                    <CheckBox IsChecked="{Binding ElementName=DGCallbackRules, Path=SelectedItem.Callback}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Callback'}"></CheckBox>
                                </nixxis:NixxisStackPanel>
                            </GroupBox>

                            <GroupBox Grid.Row="3" Margin="0,8,0,0">
                                <GroupBox.Header>
                                    <nixxis:NixxisDetailedToggle local:RightsManagement.Rights="GlobalSettings.CallbackRules.Rule.ActionDetail" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=GlobalSettings.CallbackRules.Rule.ActionDetail}" Name="CBActionDetail" DetailContent="{Binding ElementName=DGCallbackRules, Path=SelectedItem.ActionDescription}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Action when rule matches'}"></nixxis:NixxisDetailedToggle>
                                </GroupBox.Header>

                                <nixxis:NixxisStackPanel Visibility="{Binding ElementName=CBActionDetail, Path=IsChecked, Converter={StaticResource VisWithCollapseConverter}}">
                                    <Label Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Action:'}"></Label>
                                    <ComboBox Name="cboAction" ItemsSource="{StaticResource actions}" SelectedValuePath="EnumValue" DisplayMemberPath="Description" SelectedValue="{Binding ElementName=DGCallbackRules, Path=SelectedItem.Action}"></ComboBox>


                                    <Label Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Delay:'}">
                                        <Label.Visibility>
                                            <MultiBinding Converter="{StaticResource BoolMultiOrConverter}" TargetNullValue="Collapsed">
                                                <Binding ElementName="cboAction" Path="SelectedValue" Converter="{StaticResource EqConverter}" ConverterParameter="{x:Static crsc:QualificationAction.RetryNotBefore}"></Binding>
                                                <Binding ElementName="cboAction" Path="SelectedValue" Converter="{StaticResource EqConverter}" ConverterParameter="{x:Static crsc:QualificationAction.RetryAt}"></Binding>
                                                <Binding ElementName="cboAction" Path="SelectedValue" Converter="{StaticResource EqConverter}" ConverterParameter="{x:Static crsc:QualificationAction.Callback}"></Binding>
                                            </MultiBinding>
                                        </Label.Visibility>
                                    </Label>
                                    <nixxis:DurationPicker Duration="{Binding ElementName=DGCallbackRules, Path=SelectedItem.RelativeDelay, Converter={StaticResource CoefConverter}, ConverterParameter=60}" ShowSeconds="False">
                                        <nixxis:DurationPicker.Visibility>
                                            <MultiBinding Converter="{StaticResource BoolMultiOrConverter}" TargetNullValue="Collapsed">
                                                <Binding ElementName="cboAction" Path="SelectedValue" Converter="{StaticResource EqConverter}" ConverterParameter="{x:Static crsc:QualificationAction.RetryNotBefore}"></Binding>
                                                <Binding ElementName="cboAction" Path="SelectedValue" Converter="{StaticResource EqConverter}" ConverterParameter="{x:Static crsc:QualificationAction.RetryAt}"></Binding>
                                                <Binding ElementName="cboAction" Path="SelectedValue" Converter="{StaticResource EqConverter}" ConverterParameter="{x:Static crsc:QualificationAction.Callback}"></Binding>
                                            </MultiBinding>
                                        </nixxis:DurationPicker.Visibility>

                                    </nixxis:DurationPicker>

                                    <Label Visibility="{Binding ElementName=cboAction, Path=SelectedValue, Converter={StaticResource IneqCConverter},ConverterParameter={x:Static crsc:QualificationAction.Callback}}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Validity:'}"></Label>
                                    <nixxis:DurationPicker Visibility="{Binding ElementName=cboAction, Path=SelectedValue, Converter={StaticResource IneqCConverter},ConverterParameter={x:Static crsc:QualificationAction.Callback}}" Duration="{Binding ElementName=DGCallbackRules, Path=SelectedItem.Validity, Converter={StaticResource CoefConverter}, ConverterParameter=60}" ShowSeconds="False"></nixxis:DurationPicker>

                                    <CheckBox Visibility="{Binding ElementName=cboAction, Path=SelectedValue, Converter={StaticResource IneqCConverter},ConverterParameter={x:Static crsc:QualificationAction.Callback}}" IsChecked="{Binding ElementName=DGCallbackRules, Path=SelectedItem.LooseTarget}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Reset target'}"></CheckBox>

                                    <CheckBox IsChecked="{Binding ElementName=DGCallbackRules, Path=SelectedItem.ForceProgressive}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Dial in progressive'}"></CheckBox>

                                    <CheckBox IsChecked="{Binding ElementName=DGCallbackRules, Path=SelectedItem.ForcePreview}" Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Dial in preview'}"></CheckBox>

                                </nixxis:NixxisStackPanel>
                            </GroupBox>

                        </Grid>
                    </ScrollViewer>

                </Grid>

            </nixxis:NixxisTabItem>

        </nixxis:NixxisTabControl>


        <nixxis:NixxisTabControl nixxis:PresentationGrid.Meaning="Properties" Visibility="{Binding ElementName=MainGrid, Path=SelectedValue, Converter={StaticResource IneqCConverter}, ConverterParameter=defaultcarrier++++++++++++++++++}" IsEnabled="{Binding ElementName=MainGrid, Path=SelectedIndex, Converter={StaticResource IneqConverter}, ConverterParameter={StaticResource -1}}">

            <nixxis:NixxisTabControl.DataContext>
                <MultiBinding Converter="{StaticResource srcChooser2}" ConverterParameter="defaultcarrier++++++++++++++++++" TargetNullValue="{x:Null}" FallbackValue="{x:Null}">
                    <Binding ElementName="MainGrid" Path="SelectedItem"></Binding>
                    <Binding Source="{x:Null}"></Binding>
                </MultiBinding>
            </nixxis:NixxisTabControl.DataContext>


            <!--General carriers-->
            <nixxis:NixxisTabItem>
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <Image Width="25" Height="25" Source="Images\AdminSmall_Carrier.png"/>
                        <TextBlock VerticalAlignment="Center" Text="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='General'}"></TextBlock>
                    </StackPanel>
                </TabItem.Header>

                <ScrollViewer CanContentScroll="False" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                            <ColumnDefinition Width="Auto"></ColumnDefinition>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                        </Grid.ColumnDefinitions>


                        <nixxis:NixxisStackPanel>

                            <Label Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Prefix:'}"></Label>
                            <TextBox local:RightsManagement.Rights="Carrier.Prefix" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=Carrier.Prefix}" Text="{Binding Prefix}"></TextBox>

                            <Label Content="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Code transmitted to gateway:'}"></Label>
                            <TextBox local:RightsManagement.Rights="Carrier.Code" IsEnabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource rightsConverter}, ConverterParameter=Carrier.Code}" Text="{Binding Code}"></TextBox>

                        </nixxis:NixxisStackPanel>

                        <GridSplitter IsTabStop="False" Grid.Column="1" Grid.RowSpan="10" Margin="5,0,5,0"  ResizeDirection="Columns" Width="2" VerticalAlignment="Stretch" HorizontalAlignment="Center"  ></GridSplitter>

                    </Grid>
                </ScrollViewer>
            </nixxis:NixxisTabItem>

            <!--Numbering plan-->
            <nixxis:NixxisTabItem Name="tabNumberingPlan">
                <TabItem.Header>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <Image Width="25" Height="25" Source="Images\AdminSmall_Carrier.png"/>
                        <TextBlock VerticalAlignment="Center" Text="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Numbering plan'}"></TextBlock>
                    </StackPanel>
                </TabItem.Header>

                <nixxis:NixxisDataGrid local:RightsManagement.Rights="Carriers.NumberingPlan" IsDisabled="{Binding ElementName=MySelf, Path=SelectedItem, Converter={StaticResource invertedRightsConverter}, ConverterParameter=Carriers.NumberingPlan}" CanUserDeleteRows="False"  DefaultSortOrder="ShortDisplayText" Grid.Row="1" Name="DGNumberingPlan" EditMode="SingleClick" ItemsSource="{Binding NumberingPlanEntries}"  CanUserAddRows="False" HeadersVisibility="Column" RowDetailsVisibilityMode="Collapsed" >

                    <nixxis:NixxisDataGrid.Columns>

                        <DataGridTextColumn IsReadOnly="True" EditingElementStyle="{StaticResource DatagridTextEdit}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Entry'}" Binding="{Binding ShortDisplayText}"></DataGridTextColumn>

                        <DataGridTextColumn IsReadOnly="True" EditingElementStyle="{StaticResource DatagridTextEdit}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Activity'}" Binding="{Binding Activity.Target.ShortDisplayText}"></DataGridTextColumn>

                    </nixxis:NixxisDataGrid.Columns>

                    <nixxis:NixxisDataGrid.ContextMenu>
                        <ContextMenu>
                            <MenuItem Visibility="{Binding RelativeSource={RelativeSource Mode=Self}, Path=IsEnabled, Converter={StaticResource VisWithCollapseConverter}}" Header="{Binding Source={StaticResource tcx}, Converter={StaticResource tcv}, ConverterParameter='Go to definition'}" Command="local:AdminFrameSet.ShowObject" CommandParameter="{Binding RelativeSource={RelativeSource Self}, Path=Parent}"></MenuItem>
                        </ContextMenu>
                    </nixxis:NixxisDataGrid.ContextMenu>


                </nixxis:NixxisDataGrid>

            </nixxis:NixxisTabItem>

        </nixxis:NixxisTabControl>

     </nixxis:PresentationGrid>
    
</UserControl>
